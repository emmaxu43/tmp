步骤1:

编写一个程序story-step1,该程序接受一个命令行参数:故事模板文件。

程序应该解析故事模板,将所有的空白处用"cat"单词替换,然后打印出修改后的故事。

需要调用提供的函数chooseWord,传入NULL作为第二个参数,以获得返回值"cat"。

如果输入文件格式不正确,应打印错误信息并以失败状态退出。

步骤2:

编写一个程序story-step2,该程序接受一个命令行参数:包含类别和单词的文件名。

程序应该读取该文件,将单词存储到一个catarray_t数据结构中,然后使用提供的printWords函数打印出该数据结构的内容。

如果输入文件格式不正确,应打印错误信息并以失败状态退出。

步骤3:

编写一个程序story-step3,该程序接受两个命令行参数:包含类别和单词的文件名,以及故事模板文件名。

程序应该利用步骤1和步骤2中编写的函数,添加以下功能:

  (1) 从指定的类别中随机选择一个单词来替换空白处。
  (2) 支持引用之前使用过的单词,即如果类别名是一个有效的正整数,则用之前使用过的单词替换空白处,数字1表示前一个单词。

如果类别名既不是有效的整数,也不是catarray_t中的有效类别,程序应以失败状态退出。

步骤4:

编写一个程序story-step4,该程序接受一个可选参数"-n"和两个必需参数:包含类别和单词的文件名,以及故事模板文件名。

如果给定了"-n"选项,程序应确保chooseWord不会返回已经使用过的单词(但是对于引用之前使用过的单词的情况除外)。

如果没有给定"-n"选项,程序的行为应该与步骤3中的程序相同。
